<html>
	<head>
		<title>3dengfx documentation - Appendix B : Design decisions</title>
	</head>
	<body>
		<h1>Appendix B : Design decisions</h1><br>
		<hr>
		<p>
			Here I will try to explain in a few words the design decisicions behind
			3dengfx and how everything falls together.
		</p>
		
		<h3>Animation system</h3>
		<p>
		
			The core of the 3d engine is the animation system, it is very tightly
			integrated with everything. There are two key concepts at play here, the
			<em>PRS</em> the <em>XFormNode</em> and the <em>MotionController</em>.<br>
			
		</p>
		<p>
		
			The PRS <em>(gfx/3dgeom.hpp)</em> is a class that represents the position and
			orientation of something in 3d space. It is comprised of 3 parts, a position
			vector, a rotation quaternion and a scale vector <em>(PRS =
			<strong>P</strong>osition, <strong>R</strong>otation,
			<strong>S</strong>cale)</em>.<br> It can be used to represent orientation at
			specific instances of time and provides for easy interpolation to obtain
			intermediate PRS states, this was the main reason why a quaternion was used
			for the orientation, because we can slerp (spherical linear interpolation)
			between to quaternions easily and with nice results.
			
		</p>
		<p>
		
			The XFormNode <em>(gfx/3dgeom.hpp)</em> is really the base class of mostly
			everything in the 3d engine, it provides unified transformation and animation
			functionality that is then inherited by all kinds of 3d constructs like
			objects, cameras, lights, particles, etc.<br> The XFormNode contains motion
			controllers <em>(see below)</em> seperately for translation, rotation and
			scaling, and keyframes <em>(PRS - time pairs)</em>.  Additionally if keyframes
			are not used it has a <em>local PRS</em> that stays constant throughout time
			to acompany the various motion controllers, or be used for simple stationary
			positioning, or even to bypass the animation system entirely by manually
			tweaking it through time.
			
		</p>
		<p>
			The MotionController <em>(gfx/controller.hpp)</em> encapsulates the concept of
			a function of time. Currently it can be either an analytically defined
			function like sin and cos, with parameters that specify frequency, phase, and
			amplitude, or an implicit function defined as a number of positions and
			interpolated through catmull-rom splines or approximated through
			B-Splines.<br>
			The motion controllers, being a part of the XFormNode which is an integral
			part of every transformable object of the 3d engine, can be used everywhere.
			The XFormNode keeps a number of these for each property (translation,
			rotation, scaling) and adds them together to produce the actuall property in
			time, so they can be used not only to entirely control the position let's say
			of an object, but also to provide small-scale turbulence to its otherwise
			smooth motion. Use wisely, and remember that it all gets
			<strong>added</strong> to the keyframe-interpolated or local PRS of the object.
		</p>
	<!-- Footer -->
		<hr>
		<i>3dengfx Documentation</i><br>
		<a href ="../../index.html">Table of Contents</a>
	</body>
</html>
